<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Devis ‚Äî R3D PRINT CI</title>
  <meta name="description" content="Demande de devis rapide ‚Äî R3D PRINT CI" />
  <style>
    :root{--bg:#f7f6f3;--ink:#0f1115;--panel:#fff;--muted:#5a5e66;--stroke:#e7e3da;--gold:#bfa06a;--radius:16px;--container:1120px;--shadow:0 10px 30px rgba(15,17,21,.06)}
    *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{text-decoration:none;color:inherit} img{max-width:100%}
    .container{max-width:var(--container);margin:auto;padding:28px}
    header{border-bottom:1px solid var(--stroke);background:#f7f6f3cc}
    .bar{max-width:var(--container);margin:auto;padding:12px 28px;display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{display:flex;gap:12px;align-items:center}
    .brand img{width:60px;height:60px;object-fit:contain}
    .btn{display:inline-flex;gap:10px;align-items:center;justify-content:center;padding:10px 16px;border-radius:999px;border:1px solid #cfc7b6;background:#fff;color:#111;font-weight:700;cursor:pointer}
    .btn.gold{background:linear-gradient(180deg,#c7ab78,#b08e57);color:#fff;border-color:#a07f48}
    .lang{position:relative}.lang button{border:1px solid var(--stroke);background:#fff;border-radius:999px;padding:8px 10px;cursor:pointer}
    .lang .menu{position:absolute;right:0;top:44px;background:#fff;border:1px solid var(--stroke);border-radius:12px;box-shadow:var(--shadow);display:none}
    .lang .menu.open{display:block}.lang .menu button{display:block;width:100%;padding:8px 12px;border:0;background:transparent;text-align:left;cursor:pointer}
    .h1{font-size:clamp(26px,5.4vw,40px);margin:0 0 6px}
    .lead{color:var(--muted);max-width:860px}

    .quote-wrap{margin-top:16px}
    .clip{
      max-height:300px; overflow:hidden; position:relative; transition:max-height .35s ease;
      border-radius:14px; border:1px solid var(--stroke); background:var(--panel); box-shadow:var(--shadow); padding:16px;
    }
    .clip.is-open{max-height:1600px}
    .clip::after{content:""; position:absolute; left:0; right:0; bottom:0; height:72px; background:linear-gradient(180deg, transparent, #fff)}
    .clip.is-open::after{display:none}
    .reveal-btn{margin-top:10px; display:inline-flex; gap:8px; align-items:center; cursor:pointer; font-weight:700; border:none; background:transparent; padding:8px 0}

    form.quote{display:grid;gap:12px}
    .row{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    label{font-weight:700;font-size:14px}
    input, select, textarea{width:100%;border-radius:12px;border:1px solid var(--stroke);background:#fff;color:#111;padding:10px 12px}
    textarea{min-height:110px;resize:vertical}
    .hint{font-size:12px;color:var(--muted)}
    .back{margin-top:18px;display:flex;gap:10px}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">
        <img src="assets/logo.png" onerror="this.onerror=null;this.src='assets/logo.jpg';" alt="R3D PRINT CI">
        <strong>R3D PRINT CI</strong>
      </div>
      <nav style="display:flex;gap:10px;align-items:center">
        <a class="btn" href="index.html">Accueil</a>
        <a class="btn" href="services.html">Services</a>
        <a class="btn" href="realisations.html">R√©alisations</a>
        <div class="lang" id="langBox">
          <button id="langBtn">üåê</button>
          <div class="menu" id="langMenu">
            <button data-lang="fr">üá´üá∑ Fran√ßais</button>
            <button data-lang="en">üá¨üáß English</button>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1 class="h1" data-i18n="title">Demande de devis rapide</h1>
    <p class="lead" data-i18n="lead">Renseignez l‚Äôessentiel, on vous r√©pond rapidement avec une estimation claire (WhatsApp).</p>

    <section class="quote-wrap">
      <div class="clip" id="clipBox">
        <form class="quote" id="quoteForm">
          <div class="row">
            <div><label for="qName" data-i18n="f_name">Nom / Soci√©t√©</label><input id="qName" type="text" placeholder="Ex : Monsieur K., Soci√©t√© X" autocomplete="name"></div>
            <div><label for="qPhone" data-i18n="f_phone">T√©l√©phone / WhatsApp</label><input id="qPhone" type="tel" inputmode="tel" placeholder="+225 07 00 00 00 00" autocomplete="tel"></div>
            <div><label for="qEmail">E-mail</label><input id="qEmail" type="email" placeholder="exemple@domaine.com" autocomplete="email"></div>
          </div>

          <div class="row">
            <div><label for="qNature" data-i18n="f_nature">Nature de l‚Äôobjet</label><input id="qNature" type="text" placeholder="Troph√©e, plaque, pi√®ce fonctionnelle‚Ä¶" autocomplete="off"></div>
            <div>
              <label data-i18n="f_dims">Dimensions</label>
              <div class="row" style="grid-template-columns:repeat(4,1fr)">
                <input id="dimL" type="number" inputmode="decimal" min="0" step="0.1" placeholder="L">
                <input id="dimW" type="number" inputmode="decimal" min="0" step="0.1" placeholder="l">
                <input id="dimH" type="number" inputmode="decimal" min="0" step="0.1" placeholder="h">
                <select id="dimUnit"><option value="mm">mm</option><option value="cm">cm</option></select>
              </div>
              <div class="hint" data-i18n="f_dims_hint">Conversion automatique en millim√®tres.</div>
            </div>
            <div><label for="qStorage" data-i18n="f_env">Environnement</label>
              <select id="qStorage"><option value="" data-i18n="sel_choose">S√©lectionner‚Ä¶</option><option data-i18n="env_in">Int√©rieur</option><option data-i18n="env_out">Ext√©rieur</option><option data-i18n="env_mix">Mixte</option></select>
            </div>
          </div>

          <div class="row">
            <div><label for="qColors" data-i18n="f_colors">Couleurs souhait√©es</label><input id="qColors" type="text" placeholder="Ex : Noir / Or / Argent"></div>
            <div><label for="qMaterial" data-i18n="f_material">Mati√®re / Technologie</label>
              <select id="qMaterial">
                <option value="" data-i18n="mat_advise">√Ä conseiller</option>
                <option>FDM ‚Äî PLA</option><option>FDM ‚Äî PETG</option><option>FDM ‚Äî ASA</option>
                <option>Laser ‚Äî Bois</option><option>Laser ‚Äî Acrylique</option><option>Laser ‚Äî M√©tal (anodis√©/inox)</option>
              </select>
            </div>
            <div><label for="qQty" data-i18n="f_qty">Quantit√©</label><input id="qQty" type="number" inputmode="numeric" min="1" step="1" placeholder="1"></div>
          </div>

          <div class="row">
            <div><label for="qDeadline" data-i18n="f_deadline">D√©lai souhait√©</label><input id="qDeadline" type="text" placeholder="Ex : 3 jours / cette semaine / date pr√©cise"></div>
            <div><label for="qBudget" data-i18n="f_budget">Budget indicatif (CFA)</label><input id="qBudget" type="number" inputmode="numeric" min="0" step="1000" placeholder="Ex : 30000"></div>
            <div><label for="qLink" data-i18n="f_link">Lien fichier (Drive/WeTransfer)</label><input id="qLink" type="url" placeholder="URL de votre fichier ou croquis"></div>
          </div>

          <div>
            <label for="qNotes" data-i18n="f_notes">Notes / pr√©cisions</label>
            <textarea id="qNotes" placeholder="Contexte d‚Äôusage, finitions, contraintes, inspiration‚Ä¶"></textarea>
          </div>

          <div class="row">
            <button type="button" class="btn gold" id="sendWhatsApp" data-i18n="btn_send_wa">Envoyer sur WhatsApp</button>
            <button type="reset" class="btn" data-i18n="btn_clear">Effacer</button>
          </div>
          <div class="hint" data-i18n="f_hint">Le bouton pr√©pare un message complet et ouvre WhatsApp avec toutes les infos pr√©-remplies.</div>
        </form>
      </div>
      <button class="reveal-btn" id="toggleClip" aria-expanded="false">‚ñº Afficher plus</button>
    </section>

    <div class="back">
      <a class="btn" href="index.html">‚Üê Accueil</a>
      <a class="btn" href="services.html">Voir nos services</a>
    </div>
  </main>

  <script>
    // i18n
    const I18N={fr:{title:"Demande de devis rapide",lead:"Renseignez l‚Äôessentiel, on vous r√©pond rapidement avec une estimation claire (WhatsApp).",
      f_name:"Nom / Soci√©t√©",f_phone:"T√©l√©phone / WhatsApp",f_nature:"Nature de l‚Äôobjet",f_dims:"Dimensions",f_dims_hint:"Conversion automatique en millim√®tres.",
      f_env:"Environnement",sel_choose:"S√©lectionner‚Ä¶",env_in:"Int√©rieur",env_out:"Ext√©rieur",env_mix:"Mixte",f_colors:"Couleurs souhait√©es",f_material:"Mati√®re / Technologie",
      mat_advise:"√Ä conseiller",f_qty:"Quantit√©",f_deadline:"D√©lai souhait√©",f_budget:"Budget indicatif (CFA)",f_link:"Lien fichier (Drive/WeTransfer)",f_notes:"Notes / pr√©cisions",
      btn_send_wa:"Envoyer sur WhatsApp",btn_clear:"Effacer",f_hint:"Le bouton pr√©pare un message complet et ouvre WhatsApp avec toutes les infos pr√©-remplies."
    },en:{title:"Quick quote request",lead:"Fill in the essentials and we‚Äôll reply quickly with a clear estimate (WhatsApp).",
      f_name:"Name / Company",f_phone:"Phone / WhatsApp",f_nature:"Object nature",f_dims:"Dimensions",f_dims_hint:"Automatic conversion to millimeters.",
      f_env:"Environment",sel_choose:"Choose‚Ä¶",env_in:"Indoor",env_out:"Outdoor",env_mix:"Mixed",f_colors:"Desired colors",f_material:"Material / Technology",
      mat_advise:"Recommend for me",f_qty:"Quantity",f_deadline:"Desired deadline",f_budget:"Indicative budget (CFA)",f_link:"File link (Drive/WeTransfer)",f_notes:"Notes / details",
      btn_send_wa:"Send on WhatsApp",btn_clear:"Clear",f_hint:"The button builds the message and opens WhatsApp with all the details prefilled."
    }};
    const $=(s,c=document)=>c.querySelector(s), $$=(s,c=document)=>Array.from(c.querySelectorAll(s));
    function applyI18n(lang){ $$("[data-i18n]").forEach(el=>{ const k=el.dataset.i18n; if(I18N[lang][k]) el.textContent=I18N[lang][k];}); }
    const langBtn=$("#langBtn"), langMenu=$("#langMenu"), langBox=$("#langBox");
    function openLang(o){ langMenu.classList.toggle("open",o); }
    langBtn?.addEventListener("click",()=>openLang(!langMenu.classList.contains("open")));
    document.addEventListener("click",(e)=>{ if(!langBox?.contains(e.target)) openLang(false); });
    $$("#langMenu button").forEach(b=>b.addEventListener("click",()=>{ const l=b.dataset.lang||"fr"; localStorage.setItem("r3d_lang",l); applyI18n(l); openLang(false); document.documentElement.lang=l; }));
    const saved=localStorage.getItem("r3d_lang")||"fr"; applyI18n(saved); document.documentElement.lang=saved;

    // Devis repli√© / d√©pli√©
    const clipBox=$("#clipBox"), toggleBtn=$("#toggleClip");
    toggleBtn.addEventListener("click", ()=>{
      const open = clipBox.classList.toggle("is-open");
      toggleBtn.setAttribute("aria-expanded", open? "true":"false");
      toggleBtn.textContent = open ? "‚ñ≤ R√©duire" : "‚ñº Afficher plus";
    });

    // WhatsApp
    const rawPhone="002250757841323"; const waNumber=rawPhone.replace(/^00/,"");
    function sanitize(s){ return (s||"").toString().trim(); }
    function dimsToMM(){
      const L=parseFloat($("#dimL").value)||0, W=parseFloat($("#dimW").value)||0, H=parseFloat($("#dimH").value)||0;
      const unit=$("#dimUnit").value; const k=(unit==="cm")?10:1; return {L:L*k,W:W*k,H:H*k,unit:"mm"};
    }
    function buildQuoteMessage(){
      const lang = document.documentElement.lang || "fr";
      const t = (fr,en)=> lang==="en"?en:fr;
      const name=sanitize($("#qName").value), phone=sanitize($("#qPhone").value), email=sanitize($("#qEmail").value);
      const nature=sanitize($("#qNature").value), env=sanitize($("#qStorage").value);
      const colors=sanitize($("#qColors").value), material=sanitize($("#qMaterial").value);
      const qty=sanitize($("#qQty").value), deadline=sanitize($("#qDeadline").value), budget=sanitize($("#qBudget").value);
      const link=sanitize($("#qLink").value), notes=sanitize($("#qNotes").value);
      const d=dimsToMM(); const dims=(d.L||d.W||d.H)?`${Math.round(d.L)} √ó ${Math.round(d.W)} √ó ${Math.round(d.H)} ${d.unit}`:"";
      const lines=[
        t("Bonjour R3D PRINT CI, je souhaite un devis :","Hello R3D PRINT CI, I'd like a quote:"),"",
        name? t("‚Ä¢ Nom / Soci√©t√© : ","‚Ä¢ Name / Company: ")+name :"",
        phone? t("‚Ä¢ T√©l√©phone : ","‚Ä¢ Phone: ")+phone :"",
        email? "‚Ä¢ E-mail : "+email :"",
        nature? t("‚Ä¢ Nature de l'objet : ","‚Ä¢ Object nature: ")+nature :"",
        dims? t("‚Ä¢ Dimensions : ","‚Ä¢ Dimensions: ")+dims :"",
        env? t("‚Ä¢ Environnement : ","‚Ä¢ Environment: ")+env :"",
        colors? t("‚Ä¢ Couleurs : ","‚Ä¢ Colors: ")+colors :"",
        material? t("‚Ä¢ Mati√®re / Techno : ","‚Ä¢ Material / Tech: ")+material :"",
        qty? t("‚Ä¢ Quantit√© : ","‚Ä¢ Quantity: ")+qty :"",
        deadline? t("‚Ä¢ D√©lai souhait√© : ","‚Ä¢ Desired deadline: ")+deadline :"",
        budget? t("‚Ä¢ Budget indicatif : ","‚Ä¢ Indicative budget: ")+budget+" CFA" :"",
        link? t("‚Ä¢ Lien fichier : ","‚Ä¢ File link: ")+link :"",
        notes? t("‚Ä¢ Notes : ","‚Ä¢ Notes: ")+notes :""
      ].filter(Boolean).join("\n");
      return encodeURIComponent(lines);
    }
    function validateMinimal(){
      const nature=$("#qNature").value.trim();
      const L=$("#dimL").value.trim(), W=$("#dimW").value.trim(), H=$("#dimH").value.trim();
      return !!nature && (L||W||H);
    }
    $("#sendWhatsApp").addEventListener("click", ()=>{
      if(!validateMinimal()){ alert(document.documentElement.lang==="en"?"Please provide object nature and at least one dimension.":"Indique au minimum la nature et une dimension."); return; }
      const url="https://wa.me/"+waNumber+"?text="+buildQuoteMessage();
      window.open(url,"_blank");
    });
  </script>
</body>
</html>
